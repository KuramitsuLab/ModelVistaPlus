# activity003 - 100円両替機

## 機能要求
1. **投入金種別判別機能**: 投入された金額の種類（紙幣または硬貨）を判別する
2. **1,000円紙幣判定機能**: 投入金が1,000円紙幣かどうかを判定する
3. **500円硬貨判定機能**: 投入金が500円硬貨かどうかを判定する
4. **100円硬貨出力機能**: 条件を満たした場合に100円硬貨を出力する
5. **投入金返却機能**: 条件を満たさない場合に投入金を返却する
6. **紙幣・硬貨の受付機能**: 紙幣と硬貨の両方を受け付ける

## 非機能要求
1. **限定的な対応**: 1,000円紙幣と500円硬貨のみを受け付け、他の金種は対応しない
2. **明確な判定ロジック**: 投入金の種類と金額を正確に判別する必要がある
3. **ユーザビリティ**: 不正な投入金は返却することでユーザーに再投入を促す
4. **単一処理**: 1回の投入で1回の両替処理を完結させる

## 依存関係
1. **「投入金の種類を判別する」はプロセス開始に依存**: 最初に投入金の種類判別が実行される
2. **金額判定は「投入金の種類を判別する」に依存**: 種類が判別された後に金額判定が行われる
3. **「100円硬貨を出す」は条件判定に依存**: 1,000円紙幣または500円硬貨である場合のみ実行
4. **「投入金を戻す」は条件判定に依存**: 上記以外の場合に実行
5. **プロセス終了は「100円硬貨を出す」または「投入金を戻す」の完了に依存**: いずれかの処理後にフローが合流して終了

## 前提条件・制約
1. **受付可能金種の制約**: 1,000円紙幣または500円硬貨のみが両替対象
2. **両替比率の固定**: 1,000円→100円硬貨10枚、500円→100円硬貨5枚（図には明示されていないが論理的に推測される）
3. **単一投入の前提**: 1回に1つの紙幣または硬貨のみを投入する想定
4. **二分岐のロジック**: 条件分岐は「1,000円紙幣または500円硬貨」か「それ以外」の2つのみ
5. **フローの合流**: 両替成功・失敗のいずれの場合も最終的に同じ終了点に到達

## リスク・例外条件
1. **判別エラー**: 投入金の種類や金額を正しく判別できない場合の処理が不明
2. **100円硬貨の在庫不足**: 両替用の100円硬貨が不足している場合の処理が示されていない
3. **複数枚の同時投入**: 複数の紙幣や硬貨が同時に投入された場合の処理が不明
4. **紙幣・硬貨の詰まり**: 機械的なトラブル（詰まり、排出失敗など）への対応が示されていない
5. **偽造紙幣・硬貨**: 偽造された紙幣や硬貨が投入された場合の検知・対応が不明
6. **他の金種の投入**: 100円硬貨、5,000円紙幣、10,000円紙幣などが投入された場合の具体的な処理
7. **返却失敗**: 投入金を戻す処理が失敗した場合の対応が不明

## その他の開発上の重要な判断材料
1. **ハードウェア連携**: 紙幣・硬貨の識別センサー、排出機構などのハードウェア制御が必要
2. **在庫管理**: 100円硬貨の在庫を管理し、不足時にアラートを出す機能が必要
3. **ログ記録**: 取引履歴（投入金種、両替成否、返却など）を記録する機能が必要
4. **メンテナンスモード**: 硬貨補充や清掃時のメンテナンスモードが必要
5. **エラー通知**: ユーザーに対するエラーメッセージ表示機能が必要
6. **状態管理**: 機械の状態（稼働中、エラー、メンテナンス中など）を管理する必要がある
