# class002 - 経費管理システムのクラス図

## 機能要求
1. **社員管理機能**: 氏名、社員ID、パスワードを管理する
2. **ログイン機能**: 社員IDとパスワードを用いてログインする
3. **経費登録機能**: 社員が経費を登録できる
4. **経費申請機能**: 社員が経費を申請できる
5. **経費承認・却下機能**: マネージャーが経費を承認または却下する
6. **部署管理機能**: 部署名を管理する
7. **会社管理機能**: 会社名を管理する
8. **社員-部署の関連管理**: 社員が部署に所属する関係を管理
9. **部署-会社の関連管理**: 部署が会社に属する関係を管理

## 非機能要求
1. **セキュリティ**: パスワードによる認証機能を持つ
2. **階層構造**: 会社→部署→社員の組織階層を反映
3. **役割ベースのアクセス制御**: 一般社員とマネージャーで異なる権限を持つ
4. **データ整合性**: 社員は必ず1つの部署に所属し、部署は必ず1つの会社に属する

## 依存関係
1. **マネージャーは社員に依存**: 社員クラスを継承している
2. **経費承認・却下はログインに依存**: マネージャーがログインしていることが前提（推測）
3. **経費登録・申請はログインに依存**: 社員がログインしていることが前提（推測）
4. **社員は部署に依存**: 社員は必ず部署に所属する（多重度1）
5. **部署は会社に依存**: 部署は必ず会社に属する（多重度1）
6. **マネージャーの操作は部署に関連**: マネージャーは所属部署の経費を管理する（推測）

## 前提条件・制約
1. **多重度 1..*（社員-部署）**: 1つの部署には1人以上の社員が所属する
2. **多重度 1（社員-部署）**: 1人の社員は必ず1つの部署に所属する
3. **多重度 1..*（部署-会社）**: 1つの会社には1つ以上の部署が存在する
4. **多重度 1（部署-会社）**: 1つの部署は必ず1つの会社に属する
5. **継承関係**: マネージャーは社員のサブクラスである
6. **ロール名の明示**: 「所属社員」「所属部署」というロール名が関連に付けられている

## リスク・例外条件
1. **パスワードの管理**: パスワードの暗号化、強度チェック、有効期限などが考慮されていない
2. **ログイン失敗時の処理**: 認証失敗時のエラー処理やロックアウト機能が不明
3. **権限チェックの実装**: マネージャー以外が承認・却下操作を試みた場合の処理が不明
4. **経費のデータモデル**: 経費そのものを表すクラスが図に存在しない
5. **部署異動の処理**: 社員が部署を移動する場合の処理フローが不明
6. **マネージャーの重複**: 1つの部署に複数のマネージャーが存在する可能性とその処理
7. **承認フローの詳細**: 承認と却下の条件、承認者の階層構造などが不明

## その他の開発上の重要な判断材料
1. **継承の活用**: マネージャーは社員の全属性とメソッドを継承し、追加機能を持つ
2. **関連の方向性**: 社員→部署→会社の一方向的な所属関係
3. **経費データの保存先**: 経費情報をどのクラスに関連付けるかが図から不明
4. **セッション管理**: ログイン後のセッション管理機能が必要
5. **監査ログ**: 経費の登録、申請、承認、却下の履歴を記録する機能が必要
6. **通知機能**: 経費申請時や承認・却下時の通知機能が必要
7. **レポート機能**: 経費の集計やレポート出力機能が必要（図には明示されていない）
