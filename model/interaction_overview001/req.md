# interaction_overview001 - 書籍管理システムの処理選択

## 機能要求
1. **処理選択機能**: 書籍管理システムで実行する処理を選択できる
2. **本の返却機能**: 返却する本がある場合に本を返却する処理を実行できる（ref参照）
3. **本の貸出機能**: 新しく借りる本がある場合に本を貸し出す処理を実行できる（ref参照）
4. **分岐機能**: 返却と貸出の2つの処理から1つを選択できる

## 非機能要求
1. **柔軟性**: 返却と貸出のいずれの処理も選択可能
2. **参照設計**: 詳細な処理は別の図（ref）に委譲する設計
3. **シンプルさ**: 概要レベルで全体の流れを把握しやすい

## 依存関係
1. **「本を返却する」は「返却する本がある」条件に依存**: 返却する本が存在する場合のみ実行
2. **「本を借りる」は「新しく借りる本がある」条件に依存**: 借りる本が存在する場合のみ実行
3. **両処理は「書籍管理システムの処理を選択する」に依存**: 処理選択後に実行される

## 前提条件・制約
1. **排他的選択**: 返却または貸出のいずれか一方を選択する（同時実行は想定されていない）
2. **条件分岐**: ガード条件により処理が分岐する
3. **フローの合流**: 返却と貸出のいずれの処理後も同じ終了点に到達する
4. **詳細の委譲**: 実際の返却・貸出の詳細処理は参照先（ref）に記述されている

## リスク・例外条件
1. **どちらの条件も満たさない場合**: 返却する本も借りる本もない場合の処理が不明
2. **両方の条件を満たす場合**: 返却と貸出の両方を行いたい場合の処理フローが不明
3. **処理のキャンセル**: 選択後にキャンセルする機能が明示されていない
4. **エラー処理**: 返却または貸出が失敗した場合の対応が不明
5. **参照先の詳細**: refで参照される詳細処理の内容が不明

## その他の開発上の重要な判断材料
1. **インタラクション概要図**: この図は詳細なシーケンスではなく、高レベルな処理の流れを示している
2. **refの活用**: 詳細な処理フローは別図に分離することで、図の可読性を向上
3. **ガード条件の重要性**: 条件によって処理が分岐するため、条件判定ロジックが重要
4. **拡張性**: 他の処理（予約、検索など）を追加する余地がある設計
5. **状態管理**: 返却する本や借りる本の有無を管理する仕組みが必要
