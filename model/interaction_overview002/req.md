# interaction_overview002 - オンラインショッピングシステム

## 機能要求
1. **会員登録機能**: ユーザーが会員登録を行える（sd会員登録をする）
2. **会員情報入力機能**: 会員登録画面で会員情報を入力できる
3. **会員データ登録機能**: 会員登録管理が会員を登録する
4. **会員オブジェクト作成機能**: 会員登録管理が会員オブジェクトを作成する
5. **ログイン機能**: 会員がログインできる（ref ログイン処理）
6. **買い物籠商品追加機能**: 買い物籠に商品を追加できる（sd買い物籠に商品を追加する）
7. **買い物籠商品参照機能**: 買い物籠の商品を参照できる（ref）
8. **注文機能**: 注文を確定できる（sd注文する）
9. **注文オブジェクト作成機能**: 注文管理が注文オブジェクトを作成し、買い物籠の商品を設定する
10. **条件分岐機能**: 買い物籠に商品があるかないかで処理を分岐できる

## 非機能要求
1. **段階的な処理フロー**: 会員登録→ログイン→商品追加→注文という明確なフロー
2. **オブジェクト指向設計**: 会員、買い物籠、注文などのオブジェクトを作成・管理
3. **ユーザビリティ**: 買い物籠が空の場合は商品追加を促す設計
4. **詳細の分離**: シーケンス図（sd）と参照（ref）を使い分けて詳細度を調整

## 依存関係
1. **ログインは会員登録に依存**: 会員登録が完了していないとログインできない（推測）
2. **商品追加の分岐はログインに依存**: ログイン後に買い物籠の状態を確認
3. **買い物籠参照は商品追加に依存**: 商品がある場合のみ参照が実行される
4. **注文は買い物籠参照に依存**: 買い物籠の内容を確認後に注文が行われる
5. **注文オブジェクトの作成は注文確定に依存**: 注文処理内でオブジェクトが生成される
6. **会員オブジェクトは会員登録に依存**: 登録処理で会員オブジェクトが作成される

## 前提条件・制約
1. **シーケンシャルフロー**: 処理は基本的に上から下へ順次実行される
2. **条件分岐の存在**: 買い物籠に商品がない場合は商品追加、ある場合はスキップ
3. **オブジェクト生成タイミング**: 会員と注文のオブジェクトは処理中に動的に生成される
4. **アクターの固定**: ユーザー（会員）が主なアクターとして操作を実行
5. **画面と管理の分離**: 画面クラスと管理クラスが明確に分離されている

## リスク・例外条件
1. **会員登録の失敗**: 重複登録、入力エラーなどで登録が失敗する場合の処理が不明
2. **ログイン失敗**: 認証エラー時の処理が明示されていない（refの詳細次第）
3. **商品追加の失敗**: 在庫不足、商品が見つからない場合の処理が不明
4. **注文確定の失敗**: 決済エラー、在庫不足などで注文が失敗した場合の対応が不明
5. **買い物籠が空のままの注文**: 商品追加をスキップして注文に進んだ場合の処理が不明
6. **セッション管理**: ログアウトやセッションタイムアウトの処理が不明
7. **並行処理の考慮**: 複数ユーザーが同じ商品を同時に購入する場合の在庫管理が不明

## その他の開発上の重要な判断材料
1. **sd（シーケンス図）とref（参照）の使い分け**: 重要な処理はsdで詳細を表示し、簡単な処理はrefで参照
2. **オブジェクトのライフサイクル**: 会員と注文は処理中に作成され、永続化される必要がある
3. **画面遷移**: 会員登録画面→ログイン→買い物籠画面→注文画面という遷移が想定される
4. **データの永続化**: 会員情報、注文情報、買い物籠の内容をデータベースに保存する必要がある
5. **通知機能**: 注文確定後のメール通知などが必要（図には明示されていない）
6. **ロールバック処理**: 注文失敗時に買い物籠の状態を保持する必要がある
7. **買い物籠の管理**: 買い物籠が一時的なものかセッションに保存されるかが不明
