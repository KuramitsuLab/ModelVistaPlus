# interaction_overview003 - カスタマーサポートシステム

## 機能要求
1. **認証状態判定機能**: ユーザーがログイン済みか未ログインかを判定できる
2. **カスタマーサポート問い合わせ機能**: ログイン済みの場合にサポートシステムへ問い合わせできる（sd）
3. **ログイン処理機能**: 未ログインの場合にログイン処理を実行できる（ref）
4. **トラブル内容送信機能**: ユーザーがサポートシステムにトラブル内容を送信できる
5. **トラブル通知機能**: サポートシステムが担当者にトラブルを通知できる
6. **トラブル対処機能**: 担当者がトラブルに対処できる
7. **対処完了通知機能**: サポートシステムがユーザーにトラブル解決の通知を送信できる

## 非機能要求
1. **認証ベースのアクセス制御**: ログイン済みユーザーのみがサポート機能を利用できる
2. **非同期通信**: トラブル内容の送信と解決通知が矢印の種類で区別されている
3. **役割の明確化**: ユーザー、サポートシステム、担当者の3つのアクターが明確
4. **ワークフロー管理**: トラブル報告→通知→対処→完了通知という明確なフロー

## 依存関係
1. **サポート問い合わせはログイン状態に依存**: ログイン済みの場合のみ実行される
2. **ログイン処理は未ログイン状態に依存**: 未ログインの場合のみ実行される
3. **トラブル通知はトラブル送信に依存**: ユーザーが送信した後にシステムが担当者に通知
4. **トラブル対処はトラブル通知に依存**: 担当者は通知を受けてから対処を開始
5. **対処完了通知はトラブル対処に依存**: 対処が完了してから通知が送信される
6. **最終合流はログイン処理とサポート処理の完了に依存**: いずれかのフロー完了後に合流

## 前提条件・制約
1. **排他的分岐**: ログイン済みまたは未ログインのいずれか一方のフローに進む
2. **認証の必須性**: サポート機能を利用するには認証が必要
3. **シーケンシャルな処理**: トラブル送信→通知→対処→完了通知は順次実行される
4. **アクター間の連携**: ユーザー、システム、担当者の3者が連携して問題解決を行う
5. **フローの合流**: 両方のフロー（ログイン/サポート）が最終的に同じ終了点に到達

## リスク・例外条件
1. **ログイン失敗**: ログイン処理が失敗した場合の対応が不明（refの詳細次第）
2. **トラブル送信の失敗**: ネットワークエラーなどで送信が失敗した場合の処理が不明
3. **担当者不在**: 担当者が対応できない場合のエスカレーション処理が不明
4. **対処の失敗**: トラブルが解決できない場合の処理が不明
5. **通知の失敗**: ユーザーへの通知が届かない場合の対応が不明
6. **タイムアウト**: 対処に時間がかかる場合のタイムアウト処理が不明
7. **セッション切れ**: 対処中にセッションが切れた場合の処理が不明

## その他の開発上の重要な判断材料
1. **認証フロー**: ログイン済みかどうかで処理が大きく分岐する設計
2. **非同期メッセージ**: 実線矢印と点線矢印で同期/非同期を区別（推測）
3. **担当者の役割**: 人間の担当者が対処を行う設計（自動化されていない）
4. **通知システム**: サポートシステムが通知のハブとして機能
5. **状態管理**: トラブルの状態（報告済み、対処中、完了）を管理する必要がある
6. **ログの記録**: トラブル内容、対処履歴を記録する機能が必要（図には明示されていない）
7. **優先度管理**: 複数のトラブルが同時に発生した場合の優先順位付けが必要（図には明示されていない）
