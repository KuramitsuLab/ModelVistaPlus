# 開発判断に関連する要素

## 機能要求
- 書籍検索機能（ユーザーから棚への検索リクエスト）
- 検索結果返却機能（棚からユーザーへ検索結果を返す）
- 貸出申請機能（ユーザーから書籍への貸出リクエスト）
- 貸出結果返却機能（書籍からユーザーへ貸出結果を返す）
- 返却申請機能（ユーザーから書籍への返却リクエスト）
- 返却結果返却機能（書籍からユーザーへ返却結果を返す）

## 非機能要求
- 同期処理：各操作は順次実行される
- 応答性：各リクエストに対して結果が返却される
- トレーサビリティ：検索→貸出→返却の一連の流れが追跡可能

## 依存関係
- 検索結果の取得は検索リクエストに依存
- 貸出申請は検索完了後に実行可能
- 貸出結果の取得は貸出申請に依存
- 返却申請は貸出完了後に実行可能
- 返却結果の取得は返却申請に依存

## 前提条件・制約
- ユーザーが操作の起点
- 棚（shelf）は書籍検索を担当
- 書籍（book）は貸出・返却を担当
- 検索→貸出→返却の順序で処理
- 各操作は同期的に実行（結果を待ってから次の操作）
- 実線矢印はリクエスト、破線矢印はレスポンス

## リスク・例外条件
- 検索結果が空の場合の貸出申請の扱い
- 棚の検索処理が失敗した場合の後続処理への影響
- 貸出申請が失敗（在庫なし等）した場合のユーザーへの通知
- 返却申請が失敗した場合のデータ整合性
- 棚と書籍の間の連携が図に含まれていない（在庫確認等）
- 同時貸出申請時の競合制御
